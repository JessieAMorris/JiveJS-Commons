<head>
<script type="text/javascript" src="../../jive.js"></script>
</head>
<body>
	Just a holder HTML file that includes promise so that we can not go insane debugging


	<script>
	setTimeout(function() {
		var resCounter = 0;
		var rejCounter = 0;
		var thenCounter = 0;

		var dfd, pro, i;
		var doResCount = function(data) {
			resCounter++;
		}

		var doRejCount = function(data) {
			rejCounter++;
		}

		var doThenResCount = function(data) {
			thenCounter++;
		}

		var doThenRejCount = function(data) {
			thenCounter++;
		}

		var next = 0;
		var start, stop;
		var dummy = {dummy:"dummy"};

		i = 0;

		start = new Date().getTime();
		do {
			var dfd = new _.Dfd();
			var pro = dfd.promise();
			pro.done(doResCount);
			dfd.resolve(dummy);
			i++;
		} while ( i < 10000 );
		stop = new Date().getTime();
		//console.log("resolved", Math.floor(10000/(stop-start)*1000));

		i = 0;
		start = new Date().getTime();
		do {
			var dfd = new _.Dfd();
			var pro = dfd.promise();
			pro.fail(doRejCount);
			dfd.reject(dummy);
			i++;
		} while ( i < 10000 );
		stop = new Date().getTime();
		//console.log("rejected", Math.floor(10000/(stop-start)*1000));

		i = 0;
		start = new Date().getTime();
		do {
			var dfd = new _.Dfd();
			var pro = dfd.promise();
			pro.then(doThenResCount, doThenRejCount);
			if(next === 0) {
				next = 1;
				dfd.resolve(dummy);
			} else {
				next = 0;
				dfd.reject(dummy);
			}
			i++;
		} while ( i < 10000 );
		stop = new Date().getTime();
		//console.log("thenned", Math.floor(10000/(stop-start)*1000));
	},0);
	

	</script>


	Jive Promise:
		Done/Fail : 13667/12681 ops/sec (average of five runs)
		Then : 6548 ops/sec (average of five runs)
</body>